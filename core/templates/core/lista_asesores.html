<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Marketplace Asesores - Encuentra tu Experto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; }
        
        /* --- ESTILOS DEL HERO (PORTADA) --- */
        .hero-section {
            background: linear-gradient(135deg, #0052D4 0%, #4364F7 50%, #6FB1FC 100%);
            color: white;
            padding: 80px 20px 100px; /* Arriba, Lados, Abajo */
            text-align: center;
            margin-bottom: -50px; /* Truco para que las tarjetas suban un poco */
        }
        .hero-title { font-weight: 800; font-size: 3rem; margin-bottom: 20px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .hero-subtitle { font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9; }

        /* --- BARRA DE B√öSQUEDA FLOTANTE --- */
        .search-card {
            background: white;
            padding: 20px;
            border-radius: 50px; /* Bordes muy redondos */
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            max-width: 800px;
            margin: 0 auto; /* Centrado */
            display: flex;
            gap: 10px;
        }
        .search-input { border: none; flex: 1; padding: 15px 20px; font-size: 1.1rem; outline: none; border-radius: 30px; }
        .search-btn { border-radius: 30px; padding: 10px 40px; font-weight: bold; font-size: 1.1rem; }

        /* --- PASOS (C√ìMO FUNCIONA) --- */
        .steps-section { padding: 80px 20px 40px; text-align: center; }
        .step-icon { font-size: 3rem; color: #4364F7; margin-bottom: 15px; }
        .step-card { border: none; background: transparent; }

        /* --- TARJETAS DE ASESORES --- */
        .advisor-card {
            border: none;
            border-radius: 15px;
            transition: transform 0.3s, box-shadow 0.3s;
            background: white;
            overflow: hidden;
            height: 100%;
        }
        .advisor-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
        .advisor-header { background-color: #f1f3f5; padding: 20px; text-align: center; }
        .advisor-avatar { width: 80px; height: 80px; background: #ddd; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #666; }
        .price-tag { color: #28a745; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-3">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{% url 'inicio' %}">üöÄ Marketplace</a>
            
            <div class="ms-auto d-flex align-items-center gap-3">
                {% if user.is_authenticated %}
                    <span class="text-white-50 d-none d-md-inline">Hola, {{ user.first_name }}</span>
                    <a href="{% url 'lobby' %}" class="btn btn-outline-light btn-sm">Mi Men√∫</a>
                {% else %}
                    <a href="{% url 'login' %}" class="text-white text-decoration-none me-3">Ingresar</a>
                    <a href="{% url 'registro_unificado' %}" class="btn btn-primary btn-sm">Crear Cuenta</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <h1 class="hero-title">Encuentra al experto que necesitas</h1>
        <p class="hero-subtitle">Programadores, Abogados, Dise√±adores... listos para ayudarte en lo que necesites.</p>
        
        <form method="get" class="search-card">
            <input type="text" name="q" class="search-input" placeholder="¬øQu√© buscas?"{{ query_actual|default:'' }}">
            <button type="submit" class="btn btn-primary search-btn">üîç Buscar</button>
        </form>
    </section>

    <div class="container" style="margin-top: 50px;">
        
        {% if query_actual %}
            <h3 class="mb-4 text-center">Resultados para: "{{ query_actual }}"</h3>
            <div class="text-center mb-4"><a href="{% url 'inicio' %}" class="text-danger">‚ùå Borrar filtros</a></div>
        {% else %}
            <div class="row steps-section">
                <div class="col-md-4 mb-4">
                    <div class="step-icon"><i class="fa-solid fa-magnifying-glass"></i></div>
                    <h5>1. Busca</h5>
                    <p class="text-muted">Encuentra al profesional ideal por especialidad o precio.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="step-icon"><i class="fa-regular fa-calendar-check"></i></div>
                    <h5>2. Agenda</h5>
                    <p class="text-muted">Elige el horario que m√°s te acomode y reserva.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="step-icon"><i class="fa-solid fa-video"></i></div>
                    <h5>3. Conecta</h5>
                    <p class="text-muted">Recibe el link y ten tu asesor√≠a por llamada.</p>
                </div>
            </div>
            
            <h2 class="text-center mb-5 fw-bold text-dark">Asesores Disponibles</h2>
        {% endif %}

        <div class="row g-4 mb-5">
            {% for asesor in asesores %}
                <div class="col-md-6 col-lg-4">
                    <div class="advisor-card shadow-sm">
                        <div class="advisor-header">
                            <div class="advisor-avatar">
                                {{ asesor.user.first_name|slice:":1" }}{{ asesor.user.last_name|slice:":1" }}
                            </div>
                            <h4 class="mb-1">{{ asesor.user.first_name }} {{ asesor.user.last_name }}</h4>
                            <span class="badge bg-info text-dark">{{ asesor.public_title }}</span>
                        </div>
                        <div class="card-body p-4 text-center">
                            <p class="text-muted small">
                                {{ asesor.experience_summary|truncatechars:80 }}
                            </p>
                            <div class="price-tag mb-3">${{ asesor.hourly_rate }} / hora</div>
    
                            <a href="{% url 'perfil_publico' asesor.id %}" class="btn btn-primary w-100">
                                Ver Experiencia 
                            </a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center py-5">
                    <h3>No encontramos resultados</h3>
                    <p class="text-muted">Intenta con otra palabra clave.</p>
                </div>
            {% endfor %}
        </div>

    </div>
    <footer class="bg-dark text-white text-center py-4 mt-auto">
        <p class="mb-0">¬© 2026 Marketplace Asesores.</p>
    </footer>

</body>
</html>